id: twinrx_usrp_source
label: TwinRX USRP Source
category: '[DoA]'
flags: [ throttle ]

parameters:
-   id: samp_rate
    label: Samp Rate
    dtype: float
    default: 1000000
-   id: center_freq
    label: Center Freq (Hz)
    dtype: float
    default: 2400000000
-   id: gain
    label: Gain Value
    dtype: float
    default: 40
-   id: sources
    label: Num Channels
    dtype: int
    default: 4
-   id: addresses
    label: Device Address
    dtype: string
    default: "addr=192.168.40.2"

asserts:
- ${ sources > 1 }
- ${ sources != 3 }
- ${ sources < 5 }

outputs:
-   domain: stream
    dtype: complex
    multiplicity: ${ sources }

templates:
    imports: import doa
    make: doa.twinrx_usrp_source(${samp_rate}, ${center_freq}, ${gain}, ${sources}, ${addresses})
    callbacks:
    - set_samp_rate(${samp_rate})
    - set_center_freq(${center_freq})
    - set_gain(${gain})
    - set_sources(${sources})

documentation: |-
    This block is a wrapper to the USRP source block when using an X310 with 1 or 2 TwinRXs. 

    Args:
    - samp_rate: Sample rate
    - center_freq: Center frequency
    - gain: Gain to be applied
    - sources: Number of input streams
    - addresses: Device address

file_format: 1
